!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;((e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).pip||(e.pip={})).system=t()}}(function(){return function n(o,a,c){function l(e,t){if(!a[e]){if(!o[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(p)return p(e,!0);var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}var r=a[e]={exports:{}};o[e][0].call(r.exports,function(t){return l(o[e][1][t]||t)},r,r.exports,n,o,a,c)}return a[e].exports}for(var p="function"==typeof require&&require,t=0;t<c.length;t++)l(c[t]);return l}({1:[function(t,e,i){},{}],2:[function(t,e,i){var s=(r.$inject=["$element","$attrs","$scope","$timeout"],r.prototype.isDisable=function(){return this.ngDisable=this._scope.ngDisabled?this._scope.ngDisabled:null,_.isFunction(this.ngDisable)&&this.ngDisable()},r.prototype.onSearch=function(){var t=this;this.isDisable()||(this._scope.search=this.localSearch,this._timeout(function(){_.isFunction(t.pipOnSearch)&&t.pipOnSearch()},200))},r.prototype.onClear=function(){this.isDisable()||(this.localSearch=null,this.onSearch())},r);function r(t,e,i,s){var r=this;this.onKeyPress=function(t){13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.onSearch())},t.addClass("pip-search-row"),t.addClass("flex"),this._element=t,this._scope=i,this._timeout=s,this.pipOnSearch=i.onSearch?i.onSearch:null,this.placeholder=i.placeholder?i.placeholder:"SEARCH_ROW_PLACEHOLDER",i.$watch("search",function(t){t!=r.localSearch&&(r.localSearch=t)})}function n(t){t.translations("en",{SEARCH_ROW_PLACEHOLDER:"Search ..."}),t.translations("ru",{SEARCH_ROW_PLACEHOLDER:"Найти ..."})}n.$inject=["pipTranslateProvider"],angular.module("pipDirective",[]).directive("pipSearchRow",function(){return{restrict:"E",controller:s,controllerAs:"searchRow",scope:{search:"=pipSearch",onSearch:"&pipOnSearch",placeholder:"=pipPlaceholder",ngDisabled:"&"},templateUrl:"common/search/SearchRow.html"}}).config(n)},{}],3:[function(t,e,i){n.$inject=["$injector","$stateProvider"];var s=(r.$inject=["$window","$scope","$state","$rootScope","$mdMedia","$injector","pipNavService"],r.prototype.appHeader=function(){this.pipNavService.appbar.parts={logo:!1,icon:!1,title:"breadcrumb"},this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="Counters",this.pipNavService.actions.hide()},r.prototype.onRetry=function(){this.$window.history.back()},r);function r(t,e,i,s,r,n,o){this.$window=t,this.pipNavService=o;n.has("pipMedia")&&n.get("pipMedia");this.appHeader()}function n(t,e){e.state("counters",{url:"/counters",controller:s,auth:!1,controllerAs:"$ctrl",templateUrl:"counters/CountersPage.html"})}angular.module("pipCountersPage",["pipNav"]).config(n)},{}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={},r=(n.$inject=["$state","pipCountersData","pipMedia"],n.prototype.readCounters=function(){var e=this;this.pipCountersData.readCounters(null,function(t){e.counters=t.data,console.log(e.counters,t)})},n);function n(t,e,i){this.$state=t,this.pipCountersData=e,this.pipMedia=i,this.readCounters()}angular.module("pipCountersPanel",[]).component("pipCountersPanel",{bindings:s,templateUrl:"counters/CountersPanel.html",controller:r})},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$stateParams","pipRest","pipSession"],r.prototype.readCounters=function(t,e,i){return this.pipRest.getResource("counters").get({},function(t){e&&e(t)},function(t){i&&i(t)})},r);function r(t,e,i){this.$stateParams=t,this.pipRest=e,this.pipSession=i,this.RESOURCE="counters"}var n=(o.prototype.$get=["$stateParams","pipRest","pipSession",function(t,e,i){return null==this._service&&(this._service=new s(t,e,i)),this._service}],o);function o(){this.RESOURCE="counters"}angular.module("pipCountersData",["pipRest"]).provider("pipCountersData",n)},{}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});function s(){}i.ErrorDescription=s},{}],7:[function(t,e,i){"use strict";var s,r=this&&this.__extends||(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(i,"__esModule",{value:!0});var n,o=t("./LogMessage"),a=(n=o.LogMessage,r(c,n),c);function c(){return null!==n&&n.apply(this,arguments)||this}i.ErrorLogMessage=a;function l(){}i.ErrorMessageRecord=l;function p(){this.start=0,this.pageSize=100,this.refresh=3,this.defaultSearch="",this.refreshEvent="TOOLS.ERRORS_REFRESH",this.refreshTimes=[1,2,3,5,10]}i.ConfigErrors=p;var d=function(){};d.Limit=50,d.Step=50,i.ErrorsMessagesVisability=d},{"./LogMessage":14}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$stateParams","pipRest","pipSession"],r.prototype.readEvents=function(t,e,i,s,r){return void 0===e&&(e=0),void 0===i&&(i=100),(t=t||{}).skip=e,t.take=i,t.total=!0,this.pipRest.getResource("events").get(t,function(t){s&&s(t)},function(t){r&&r(t)})},r);function r(t,e,i){this.$stateParams=t,this.pipRest=e,this.pipSession=i,this.RESOURCE="events"}var n=(o.prototype.$get=["$stateParams","pipRest","pipSession",function(t,e,i){return null==this._service&&(this._service=new s(t,e,i)),this._service}],o);function o(){this.RESOURCE="events"}angular.module("pipEventsData",["pipRest"]).provider("pipEventsData",n)},{}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],10:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],11:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],12:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],13:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0})},{}],14:[function(t,e,i){"use strict";var s;Object.defineProperty(i,"__esModule",{value:!0}),(s=i.LogLevel||(i.LogLevel={}))[s.None=0]="None",s[s.Fatal=1]="Fatal",s[s.Error=2]="Error",s[s.Warn=3]="Warn",s[s.Info=4]="Info",s[s.Debug=5]="Debug",s[s.Trace=6]="Trace";function r(){}i.LogMessage=r;function n(){}i.LogMessages=n},{}],15:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$stateParams","pipRest","pipSession"],r.prototype.filterToString=function(t){if(null==t)return null;var e="";for(var i in t){0<e.length&&(e+=";");var s=t[i];e+=null!=s?i+"="+s:i}return e},r.prototype.readLogging=function(t,e,i,s,r){return void 0===e&&(e=0),void 0===i&&(i=100),t.skip=e,t.take=i,t.total=!0,this.pipRest.getResource("logging").get(t,function(t){s&&s(t)},function(t){r&&r(t)})},r.prototype.readErrors=function(t,e,i,s,r){return void 0===e&&(e=0),void 0===i&&(i=100),t.skip=e,t.take=i,t.total=!0,this.pipRest.getResource("errors").get(t,function(t){s&&s(t)},function(t){r&&r(t)})},r);function r(t,e,i){this.$stateParams=t,this.pipRest=e,this.pipSession=i,this.RESOURCE="logging"}var n=(o.prototype.$get=["$stateParams","pipRest","pipSession",function(t,e,i){return null==this._service&&(this._service=new s(t,e,i)),this._service}],o);function o(){this.RESOURCE="logging"}angular.module("pipLoggingData",["pipRest"]).provider("pipLoggingData",n)},{}],16:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$stateParams","pipRest","pipSession"],r.prototype.readSettingsSections=function(t,e,i){return this.pipRest.getResource("settings_section").get({},function(t){e&&e(t.data)},function(t){i&&i(t)})},r.prototype.readSettings=function(t,e,i){return this.pipRest.getResource("settings").get({section:t},function(t){e&&e(t)},function(t){i&&i(t)})},r.prototype.createSettings=function(t,e,i,s){return void 0===e&&(e={}),console.log("section",t,this.pipRest.getResource("settings")),this.pipRest.getResource("settings").save({section:t},e,function(t){i&&i(t)},function(t){s&&s(t)})},r.prototype.updateSettings=function(t,e,i,s){return this.pipRest.getResource("settings").update({section:t},e,function(t){i&&i(t)},function(t){s&&s(t)})},r.prototype.saveSettingsKey=function(t,e,i,s,r){return this.pipRest.getResource("settings").save({section:t,key:e},i,function(t){s&&s(t)},function(t){r&&r(t)})},r);function r(t,e,i){this.$stateParams=t,this.pipRest=e,this.pipSession=i,this.RESOURCE="settings"}var n=(o.prototype.$get=["$stateParams","pipRest","pipSession",function(t,e,i){return null==this._service&&(this._service=new s(t,e,i)),this._service}],o);function o(){this.RESOURCE="settings"}angular.module("pipSettingsData",["pipRest"]).provider("pipSettingsData",n)},{}],17:[function(t,e,i){"use strict";var s;Object.defineProperty(i,"__esModule",{value:!0}),(s=i.StatCounterType||(i.StatCounterType={}))[s.Total=0]="Total",s[s.Year=1]="Year",s[s.Month=2]="Month",s[s.Day=3]="Day",s[s.Hour=4]="Hour";function r(){}i.StatCounter=r;function n(){}i.StatCounterValue=n;function o(){}i.StatCounterSet=o},{}],18:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$stateParams","pipRest","pipSession"],r.prototype.readStatisticsSections=function(t,e,i){return this.pipRest.getResource("statistics_section").get({},function(t){e&&e(t.data)},function(t){i&&i(t)})},r.prototype.readStatistics=function(t,e,i){return this.pipRest.getResource("statistics").get({section:t},function(t){e&&e(t)},function(t){i&&i(t)})},r.prototype.getStats=function(t,e,i,s,r,n){void 0===e&&(e=0),console.log("type",e);var o={};return null!=t&&(o.counter=t),null!=e&&(o.type=e),null!=i&&(o.fromTimeUtc=i),null!=s&&(o.toTimeUtc=s),o.section=t,this.pipRest.getResource("statistics").query(o,o,r,n)},r.prototype.getTotalStats=function(t,e,i){return this.getStats(t,0,null,null,e,i)},r.prototype.getYearlyStats=function(t,e,i,s,r){return this.getStats(t,1,e,i,s,r)},r.prototype.getMonthlyStats=function(t,e,i,s,r){return this.getStats(t,2,e,i,s,r)},r.prototype.getDailyStats=function(t,e,i,s,r){return this.getStats(t,3,e,i,s,r)},r.prototype.getHourlyStats=function(t,e,i,s,r){return this.getStats(t,4,e,i,s,r)},r.prototype.createStatistics=function(t,e,i,s){return void 0===e&&(e={}),console.log("section",t,this.pipRest.getResource("statistics")),this.pipRest.getResource("statistics").save({section:t},e,function(t){i&&i(t)},function(t){s&&s(t)})},r.prototype.updateStatistics=function(t,e,i,s){return this.pipRest.getResource("statistics").update({section:t},e,function(t){i&&i(t)},function(t){s&&s(t)})},r);function r(t,e,i){this.$stateParams=t,this.pipRest=e,this.pipSession=i,this.RESOURCE="statistics"}var n=(o.prototype.$get=["$stateParams","pipRest","pipSession",function(t,e,i){return null==this._service&&(this._service=new s(t,e,i)),this._service}],o);function o(){this.RESOURCE="statistics"}angular.module("pipStatisticsData",["pipRest"]).provider("pipStatisticsData",n)},{}],19:[function(t,e,i){n.$inject=["$injector","$stateProvider"];var s=(r.$inject=["$window","$scope","$state","$rootScope","$mdMedia","$injector","pipNavService"],r.prototype.appHeader=function(){this.pipNavService.appbar.parts={logo:!1,icon:!1,title:"breadcrumb"},this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="Errors",this.pipNavService.actions.hide()},r.prototype.onRetry=function(){this.$window.history.back()},r);function r(t,e,i,s,r,n,o){this.$window=t,this.pipNavService=o;n.has("pipMedia")&&n.get("pipMedia");this.appHeader()}function n(t,e){e.state("errors",{url:"/errors",controller:s,auth:!1,controllerAs:"$ctrl",templateUrl:"errors/ErrorsPage.html"})}angular.module("pipErrorsPage",["pipNav"]).config(n)},{}],20:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var h=t("../data/ErrorsMessages"),r=t("../data/ErrorDescription"),s={},n=(o.$inject=["$log","$q","$state","$scope","$location","$rootScope","pipNavService","pipLoggingData","pipTimer","pipMedia","pipConfirmationDialog","pipToasts"],o.prototype.getErrorString=function(t){return t?_.isString(t)?t:t.message?t.message:t.data&&t.data.message?t.data.message:t.statusText||"":""},o.prototype.clean=function(){this.search=null,this.onSearchErrors()},o.prototype.clearErrors=function(){this._pipConfirmationDialog.show({event:null,title:"Clear all errors?",ok:"Clear",cancel:"Cancel"},function(){},function(){console.log("You disagreed")})},o.prototype.clearErrorsError=function(t){this._pipToasts.showError(t)},o.prototype.setState=function(){this.loading?this.state="loading":angular.isArray(this.errors)&&this.errors&&0<this.errors.length?this.state="data":(!angular.isArray(this.errors)||this.errors&&0==this.errors.length)&&(this.state="empty")},o.prototype.setRefresh=function(){this.refreshTime=60*this.refresh*1e3},o.prototype.getFilter=function(){var t={};return this.searchQuery&&(t.Search=this.searchQuery),t},o.prototype.setRefreshTimer=function(){this._pipTimer.isStarted()||this._pipTimer.start(),this.setRefresh(),this.removeRefreshTimer(),this._pipTimer.addEvent("TOOLS.ERRORS_REFRESH",this.refreshTime)},o.prototype.removeRefreshTimer=function(){this._pipTimer.removeEvent("TOOLS.ERRORS_REFRESH")},o.prototype.onErrorRead=function(t){var e,i;console.log(t);var s=[];for(var r in e=this.createErrors(t),i=this.prepareErrorTree(this.createErrorTree(e))){var n=i[r];if(this.errors&&0<this.errors.length){var o=_.find(this.errors,function(t){return!!(t&&t.items&&0<t.items.length&&t.items[0].error.type==r)});n.collapsed=!!o&&!!o.collapsed}s.push(n)}this.errors=_.sortBy(s,function(t){return t.ErrorType}),this.loading=!1,this.updating=!1,this.error=!1,this.setState()},o.prototype.onError=function(t){this._log.error("Error: "+JSON.stringify(t)),this.errorText="Error: Error on load erros messages.",this.errorMessage=t,this.loading=!1,this.updating=!1,this.error=!0,this.setState()},o.prototype.InitErrors=function(){var i=this,t=this.getFilter();this.loading=!0,this.error=!1,async.parallel([function(e){i._errorsData.readErrors(t,i._start,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+2*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+3*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+4*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+5*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+6*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+7*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+8*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})},function(e){i._errorsData.readErrors(t,i._start+9*i._take,i._take,function(t){e(null,t)},function(t){e(t,null)})}],function(t,e){!t&&e&&i.onErrorRead(e),t&&i.onError(e)})},o.prototype.createErrors=function(t){var i=[];return _.each(t,function(t){if(angular.isObject(t)&&angular.isArray(t.data))for(var e=0;e<t.data.length;e++)i.push(t.data[e])}),i},o.prototype.createErrorTree=function(t){var i=this,s={};return angular.isArray(t)&&_.each(t,function(t){var e;t.error?e=t.error.type:(e="undefined",t.error=new r.ErrorDescription),s[e]||(s[e]=i.createRecord(e)),i.createRecord(e),s[e]=i.addToRecord(s[e],t)}),s},o.prototype.prepareErrorTree=function(t){var e=this;return _.each(t,function(t){t=e.sortByTime(t)}),_.each(t,function(t){0<t.items.length&&(t.count=t.items.length,t.first=t.items[t.items.length-1].MomentTimeUtc,t.last=t.items[0].MomentTimeUtc)}),t},o.prototype.createRecord=function(t){return{items:[],ErrorType:t,first:null,last:null,count:0,collapsed:!1,show:h.ErrorsMessagesVisability.Limit}},o.prototype.addToRecord=function(t,e){var i;return i=new h.ErrorLogMessage,t&&t.items&&(i.MomentTimeUtc=moment(e.time),i.time=i.MomentTimeUtc.toDate().getTime(),i.correlation_id=e.correlation_id,i.time=e.time,i.level=e.level,i.error=e.error,i.message=e.message,t.items.push(i)),t},o.prototype.sortByTime=function(t){return t.items=_.sortBy(t.items,function(t){return t.time}),t},o.prototype.onRefreshClick=function(){this.updating=!0,this.searchQuery=this.search,this.InitErrors()},o.prototype.onRefreshChange=function(){this.setRefreshTimer()},o.prototype.onClickErrorDetails=function(){},o.prototype.onSearchErrors=function(){this.searchQuery=this.search,this._location.search("search",this.searchQuery),this.onRefreshClick()},o.prototype.onFilterErrors=function(){(this.search||this.searchQuery)&&(this.searchQuery=this.search,this._location.search("search",this.searchQuery),this.onRefreshClick())},o.prototype.onErrorsDetails=function(t){},o.prototype.onShowMore=function(t){t.show=t.show+h.ErrorsMessagesVisability.Step},o.prototype.onShowLess=function(t){t.show=h.ErrorsMessagesVisability.Limit},o.prototype.onBlur=function(){},o);function o(t,e,i,s,r,n,o,a,c,l,p,d){var u=this;this._config=new h.ConfigErrors,this.searchQuery="",this.stopRefresh=!1,this.showMessagesLimit=h.ErrorsMessagesVisability.Limit,this.loading=!1,this.updating=!1,this.error=!1,this.onKeyPress=function(t){13===t.keyCode&&(t.stopPropagation(),t.preventDefault(),this.onSearchErrors())},this._log=t,this._q=e,this._state=i,this._scope=s,this._location=r,this._errorsData=a,this._pipTimer=c,this._pipMedia=l,this._pipConfirmationDialog=p,this._pipToasts=d,this._start=this._config.start,this._take=this._config.pageSize,this._total=!0,this.refresh=this._config.refresh,this.refreshTimes=this._config.refreshTimes,this.search=this._location.search().search||this._config.defaultSearch,this.searchQuery=this.search,this.loading=!0,this._scope.$on("$destroy",function(){u.removeRefreshTimer()}),this.setRefreshTimer();var m=n.$on("TOOLS.ERRORS_REFRESH",function(){u.stopRefresh||(u.updating=!0,u.InitErrors())});s.$on("$destroy",function(){angular.isFunction(m)&&m()}),this.setState(),this.InitErrors()}angular.module("pipErrorsPanel",[]).component("pipErrorsPanel",{bindings:s,templateUrl:"errors/ErrorsPanel.html",controller:n})},{"../data/ErrorDescription":6,"../data/ErrorsMessages":7}],21:[function(t,e,i){n.$inject=["$injector","$stateProvider"];var s=(r.$inject=["$window","$scope","$state","$rootScope","$mdMedia","$injector","pipNavService"],r.prototype.appHeader=function(){this.pipNavService.appbar.parts={logo:!1,icon:!1,title:"breadcrumb"},this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="Events",this.pipNavService.actions.hide()},r.prototype.onRetry=function(){this.$window.history.back()},r);function r(t,e,i,s,r,n,o){this.$window=t,this.pipNavService=o;n.has("pipMedia")&&n.get("pipMedia");this.appHeader()}function n(t,e){e.state("events",{url:"/events",controller:s,auth:!1,controllerAs:"$ctrl",templateUrl:"events/EventsPage.html"})}angular.module("pipEventsPage",["pipNav"]).config(n)},{}],22:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={},n=function(){};n.Progress="progress",n.Data="data",n.Empty="empty";var r=function(){};r.Component="Component",r.Severity="Severity",r.Type="Type",r.All=["Component","Severity","Type"];var o=(a.$inject=["$location","$state","pipEventsData","pipMedia","pipToasts"],a.prototype.clear=function(){this.search=null,this.refreshEvents()},a.prototype.readEvents=function(){var e=this;this.updating=!0,this.pipEventsData.readEvents(this.getFilter(),this._start,this._take,function(t){e.onReadEvents(t)},function(t){e.onReadEventsError(t)})},a.prototype.getFilter=function(){return this.search?{Search:this.search}:{}},a.prototype.onReadEventsError=function(t){this.error=t},a.prototype.onReadEvents=function(t){var i=this;this.error=null,_.each(t.data,function(t,e){0===i._start&&i.events[e]?i.events[e]=t:i.events.push(t)}),0===this._start&&t.data.length<this._take&&this.events.splice(t.data.length,this._take-t.data.length),this._start+=this._take,this._take=100,this.state=0<t.data.length||0!==this._start&&0<this.events.length?n.Data:n.Empty,this.updating=!1},a.prototype.refreshEvents=function(){this._take=0<this._start?this._start:100,this._start=0,this.$location.search("search",this.search),this.readEvents()},a);function a(t,e,i,s,r){this.$location=t,this.$state=e,this.pipEventsData=i,this.pipMedia=s,this.pipToasts=r,this.events=[],this._start=0,this._take=100,this.search="",this.state=n.Progress,this.error=null,this.readEvents()}angular.module("pipEventsPanel",[]).component("pipEventsPanel",{bindings:s,templateUrl:"events/EventsPanel.html",controller:o})},{}],23:[function(t,e,i){angular.module("pipSystem",["pipDirective","pipLoggingResources","pipLoggingData","pipLoggingViewModel","pipLoggingPage","pipLoggingPanel","pipErrorsPage","pipErrorsPanel","pipCountersResources","pipCountersData","pipCountersPage","pipCountersPanel","pipEventsResources","pipEventsData","pipEventsPage","pipEventsPanel","pipSettingsResources","pipSettingsData","pipSettingsPage","pipSettingsPanel","pipStatisticsResources","pipStatisticsService","pipStatisticsData","pipStatisticsPage","pipStatisticsPanel"])},{}],24:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=function(){};s.Progress="progress",s.Data="data",s.Empty="empty",i.LoggingsState=s;var r=(n.prototype.getLoggings=function(){return this.loggings},n.prototype.setLoggings=function(t){this.loggings=t},n.prototype.setState=function(t){this.state=t},n.prototype.getState=function(){return this.state},n.prototype.readLogging=function(t,e,i){var s=this;this.pipLoggingData.readLogging({Search:t},this._start,this._take,function(t){s.onLoggingRead(t,e)},function(t){i&&i(t)})},n.prototype.refreshLogging=function(t,e,i){this._start=0,this.readLogging(t,e,i)},n.prototype.onLoggingRead=function(t,e){var i=this;this.state=0<t.data.length||0!==this._start&&0<this.loggings.length?s.Data:s.Empty,_.each(t.data,function(t,e){i.loggings[e]?i.loggings[e+i._start]=t:i.loggings.push(t)}),this._start+=t.data.length,(this.total<=this._start||this._take!=t.data.length)&&(this.total=this._start,this.loggings.length>this.total&&this.loggings.splice(this.total,this.loggings.length-this.total)),e&&e()},n);function n(t){this.pipLoggingData=t,this.loggings=[],this.state=s.Progress,this.total=0,this._start=0,this._take=100}i.LoggingModel=r},{}],25:[function(t,e,i){n.$inject=["$injector","$stateProvider"];var s=(r.$inject=["$window","$scope","$state","$rootScope","$mdMedia","$injector","pipNavService"],r.prototype.appHeader=function(){this.pipNavService.appbar.parts={logo:!1,icon:!1,title:"breadcrumb"},this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="Logging",this.pipNavService.actions.hide()},r.prototype.onRetry=function(){this.$window.history.back()},r);function r(t,e,i,s,r,n,o){this.$window=t,this.pipNavService=o;n.has("pipMedia")&&n.get("pipMedia");this.appHeader()}function n(t,e){e.state("logging",{url:"/logging",controller:s,auth:!1,controllerAs:"$ctrl",templateUrl:"logging/LoggingPage.html"})}angular.module("pipLoggingPage",["pipNav"]).config(n)},{}],26:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={},a=function(){};a.Times=[1,3,5,10,20,30];var c=function(){};c.Content="Content",c.CorrelationId="CorrelationId",c.Level="Level",c.All=["Content","CorrelationId","Level"];var r=(n.$inject=["pipLoggingViewModel","$location","pipTimer","pipMedia","pipTransaction","$rootScope"],n.prototype.$onDestroy=function(){this.pipTimer.removeEvent("Logging"),angular.isFunction(this.cleanUpFunc)&&this.cleanUpFunc()},n.prototype.loggings=function(){return this.pipLoggingViewModel.logging},n.prototype.state=function(){return this.pipLoggingViewModel.state},n.prototype.readLogging=function(){var e=this;this.stopRefresh=!0,this.transaction.begin("PROCESSING"),this.pipLoggingViewModel.readLogging(this.search,function(){e.onLoggingRead()},function(t){e.onError(t)})},n.prototype.setRefreshTimer=function(){this.pipTimer.isStarted()||this.pipTimer.start(),this.setRefresh(),this.pipTimer.removeEvent("Logging"),this.pipTimer.addEvent("Logging",this._refreshTime)},n.prototype.onRefreshChange=function(){this.setRefreshTimer()},n.prototype.setRefresh=function(){this._refreshTime=1e3*this.refresh},n.prototype.playStopAutoUpdate=function(){this.autoUpdate=!this.autoUpdate},n.prototype.onError=function(t){this.error=t,this.transaction.abort(),this.stopRefresh=!1},n.prototype.onLoggingRead=function(){this.stopRefresh=!1,this.error=null,this.transaction.end()},n.prototype.refreshLogging=function(){var e=this;this.$location.search("search",this.search),this.stopRefresh=!0,this.transaction.begin("PROCESSING"),this.pipLoggingViewModel.refreshLogging(this.search,function(){e.onLoggingRead()},function(t){e.onError(t)})},n.prototype.onSearch=function(){this.search=this.localSearch,this.refreshLogging()},n);function n(t,e,i,s,r,n){var o=this;this.pipLoggingViewModel=t,this.$location=e,this.pipTimer=i,this.pipMedia=s,this.autoUpdate=!0,this.filters=c.All,this.refresh=a.Times[3],this.refreshTimes=a.Times,this.search="",this.localSearch="",this.error=null,this.stopRefresh=!1,this.transaction=r.create("traces"),this.filter=this.$location.search().filter||c.Content,this.search=this.$location.search().search||"",this.localSearch=this.search,this.readLogging(),this.setRefreshTimer(),this.cleanUpFunc=n.$on("Logging",function(){!o.stopRefresh&&o.autoUpdate&&o.refreshLogging()})}angular.module("pipLoggingPanel",[]).component("pipLoggingPanel",{bindings:s,templateUrl:"logging/LoggingPanel.html",controller:r})},{}],27:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=t("./LoggingModel"),r=(n.$inject=["pipLoggingData"],Object.defineProperty(n.prototype,"logging",{get:function(){return this.workflow.getLoggings()},set:function(t){this.workflow.setLoggings(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"state",{get:function(){return this.workflow.getState()},set:function(t){this.workflow.setState(t)},enumerable:!0,configurable:!0}),n.prototype.readLogging=function(t,e,i){this.workflow.readLogging(t,e,i)},n.prototype.refreshLogging=function(t,e,i){this.workflow.refreshLogging(t,e,i)},n);function n(t){this.pipLoggingData=t,this.workflow=new s.LoggingModel(t)}angular.module("pipLoggingViewModel",["pipNav"]).service("pipLoggingViewModel",r)},{"./LoggingModel":24}],28:[function(t,e,i){function s(t){t.registerOperation("counters","/api/v1/counters")}s.$inject=["pipRestProvider"],angular.module("pipCountersResources",[]).config(s)},{}],29:[function(t,e,i){function s(t){t.registerOperation("events","/api/v1/eventlog")}s.$inject=["pipRestProvider"],angular.module("pipEventsResources",[]).config(s)},{}],30:[function(t,e,i){function s(t){t.registerOperation("logging","/api/v1/logging"),t.registerOperation("errors","/api/v1/logging/errors")}s.$inject=["pipRestProvider"],angular.module("pipLoggingResources",[]).config(s)},{}],31:[function(t,e,i){function s(t){t.registerPagedCollection("settings","/api/v1/settings/:section/:key",{section:"@section"},{page:{method:"GET",isArray:!1},update:{method:"PUT"}}),t.registerOperation("settings_section","/api/v1/settings/ids")}s.$inject=["pipRestProvider"],angular.module("pipSettingsResources",[]).config(s)},{}],32:[function(t,e,i){function s(t){t.registerOperation("statistics_counters","/api/v1/statistics/counters"),t.registerOperation("statistics_section","/api/v1/statistics/groups"),t.registerOperation("statistics","/api/v1/statistics/:section/:name")}s.$inject=["pipRestProvider"],angular.module("pipStatisticsResources",[]).config(s)},{}],33:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){};i.SettingsKey=r;var s=(n.$inject=["params","$mdDialog","$injector","$rootScope"],n.prototype.onOk=function(){this.$mdDialog.hide(this.key)},n.prototype.onCancel=function(){this.$mdDialog.cancel()},n);function n(t,e,i,s){this.title="New settings key",this.$mdDialog=e,this.theme=s.$theme,this.key=new r,this.key.name=t.name?t.name.replace("<wbr>",""):null,this.key.data=t.data,t.name&&t.data&&(this.title="Edit settings key")}i.AddSettingsKeyDialogController=s,angular.module("pipAddSettingsKeyDialog",["ngMaterial"]).controller("pipAddSettingsKeyDialogController",s),t("./AddSettingsKeyService")},{"./AddSettingsKeyService":34}],34:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$mdDialog"],r.prototype.show=function(t,e,i){this._mdDialog.show({targetEvent:t.event,templateUrl:"settings/AddSettingsKeyDialog.html",controller:"pipAddSettingsKeyDialogController",controllerAs:"$ctrl",locals:{params:t},clickOutsideToClose:!0}).then(function(t){e&&e(t)},function(){i&&i()})},r);function r(t){this._mdDialog=t}angular.module("pipAddSettingsKeyDialog").service("pipAddSettingsKeyDialog",s)},{}],35:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["params","$mdDialog","$injector","$rootScope"],r.prototype.onOk=function(){this.$mdDialog.hide(this.sectionName)},r.prototype.onCancel=function(){this.$mdDialog.cancel()},r);function r(t,e,i,s){this.$mdDialog=e,this.theme=s.$theme}i.AddSettingsSectionDialogController=s,angular.module("pipAddSettingsSectionDialog",["ngMaterial"]).controller("pipAddSettingsSectionDialogController",s),t("./AddSettingsSectionService")},{"./AddSettingsSectionService":36}],36:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=(r.$inject=["$mdDialog"],r.prototype.show=function(t,e,i){this._mdDialog.show({targetEvent:t.event,templateUrl:"settings/AddSettingsSectionDialog.html",controller:"pipAddSettingsSectionDialogController",controllerAs:"$ctrl",locals:{params:t},clickOutsideToClose:!0}).then(function(t){e&&e(t)},function(){i&&i()})},r);function r(t){this._mdDialog=t}angular.module("pipAddSettingsSectionDialog").service("pipAddSettingsSectionDialog",s)},{}],37:[function(t,e,i){n.$inject=["$injector","$stateProvider"];var s=(r.$inject=["$window","$scope","$state","$rootScope","$mdMedia","$injector","pipNavService"],r.prototype.appHeader=function(){this.pipNavService.appbar.parts={logo:!1,icon:!1,title:"breadcrumb"},this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="Settings",this.pipNavService.actions.hide()},r.prototype.onRetry=function(){this.$window.history.back()},r);function r(t,e,i,s,r,n,o){this.$window=t,this.pipNavService=o;n.has("pipMedia")&&n.get("pipMedia");this.appHeader()}function n(t,e){e.state("settings_tool",{url:"/settings_tool",controller:s,auth:!1,controllerAs:"$ctrl",templateUrl:"settings/SettingsPage.html"})}angular.module("pipSettingsPage",["pipNav"]).config(n)},{}],38:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s={},u=function(){};u.Progress="progress",u.Data="data",u.Empty="empty";function r(){this.hide=!1}i.SettingSection=r;var n=(o.$inject=["$window","$location","pipToasts","pipTransaction","$log","pipAddSettingsSectionDialog","$state","pipSettingsData","pipMedia","pipAddSettingsKeyDialog","pipConfirmationDialog"],o.prototype.readSettings=function(){var e=this;this.transaction.begin("Reading settings"),this.state=u.Empty,this.transaction.end(),this.pipSettingsData.readSettingsSections({},function(t){e.state=u.Progress,e.onSettingsRead(t),0<t.length?e.state=u.Data:e.state=u.Empty},function(t){e.onError(t)})},o.prototype.onSearch=function(){var i=this;if(this.$location.search("search",this.search),_.each(this.settingsSections,function(t,e){i.settingsSections[e].hide=i.filterSections(t.name)}),!this.settingsSections[this.selectIndex]||1==this.settingsSections[this.selectIndex].hide){var t=_.findIndex(this.settingsSections,{hide:!1});-1==t?(this.state=u.Empty,this.selectIndex=null):(this.state=u.Data,this.selectItem(t))}},o.prototype.clean=function(){this.search=null,this.onSearch()},o.prototype.filterSections=function(t){return!(!this.search||""==this.search)&&-1==t.indexOf(this.search)},o.prototype.onSettingsRead=function(t){var r=this;this.settingsSections=[],_.each(t,function(t){r.settingsSections.push({name:t,hide:!1})}),this.settings=[],_.each(this.settingsSections,function(t,s){t.name===r.$location.search().section&&(r.selectIndex=s),r.pipSettingsData.readSettings(t.name,function(t){var e=_.keys(t);e=_.map(e,function(t){if("$promise"==t||"$resolved"==t)return t;var i=_.split(t,"."),s="";return _.each(i,function(t,e){s+=t,e!=i.length-1&&(s+=".<wbr>")}),s});var i=_.zipObject(e,_.values(t));r.settings[s]=i,r.transaction.end(),r.state=u.Data},function(t){r.transaction.abort(),r.pipToasts.showError(t,null,null,null,null)})})},o.prototype.onError=function(t){this.error=t,this.transaction.end(t)},o.prototype.selectItem=function(t){this.selectIndex=t,this.$location.search("section",this.settingsSections[t].name)},o.prototype.updateKey=function(e,t){var i=this;this.pipAddSettingsKeyDialog.show({section:this.settingsSections[this.selectIndex],name:e,data:t},function(t){i.transaction.begin("add section"),e==t.name?i.addKeyDialogCallback(t):i.updateKeyDialogCallback(t,e)})},o.prototype.updateKeyDialogCallback=function(t,e){var i=this;e=e.replace(".",".<wbr>"),t.name=t.name.replace(".",".<wbr>"),this.pipSettingsData.createSettings(this.settingsSections[this.selectIndex].name,t.name,function(t){i.transaction.end()},function(t){i.transaction.abort(),i.pipToasts.showError(t,null,null,null,null)})},o.prototype.openDeleteKeyDialog=function(t,e){var i=this;this.pipConfirmationDialog.show({event:null,title:"Delete settings key?",ok:"Delete",cancel:"Cancel"},function(){i.deleteKey(t,e)},function(){console.log("You disagreed")})},o.prototype.deleteKey=function(t,e){var i=this;this.settings[this.selectIndex]=_.omit(this.settings[this.selectIndex],t),this.settings[this.selectIndex]=_.omit(this.settings[this.selectIndex],"$promise"),this.settings[this.selectIndex]=_.omit(this.settings[this.selectIndex],"$resolved"),this.pipSettingsData.createSettings(this.settingsSections[this.selectIndex].name,this.settings[this.selectIndex],function(t){i.transaction.end()},function(t){i.transaction.abort(),i.pipToasts.showError(t,null,null,null,null)})},o.prototype.addKey=function(){var e=this;this.pipAddSettingsKeyDialog.show({section:this.settingsSections[this.selectIndex]},function(t){e.addKeyDialogCallback(t)})},o.prototype.addKeyDialogCallback=function(t){var e=this;this.transaction.begin("add section");for(var i={},s=_.keys(this.settings[this.selectIndex]),r=_.values(this.settings[this.selectIndex]),n=0;n<r.length;n++)"$promise"!=s[n]&&"$resolved"!=s[n]&&(i[s[n]]=r[n]);i[t.name]=t.data,console.log(i),this.pipSettingsData.createSettings(this.settingsSections[this.selectIndex].name,i,function(){e.saveKeyCallback(t)},function(t){e.transaction.abort(),e.pipToasts.showError(t,null,null,null,null)})},o.prototype.saveKeyCallback=function(t){this.transaction.end(),t.name=t.name.replace(".",".<wbr>"),this.settings[this.selectIndex]||(this.settings[this.selectIndex]={}),this.settings[this.selectIndex][t.name]=t.data},o.prototype.errorkeyCallback=function(t){this.transaction.abort(),this.pipToasts.showError(t,null,null,null,null)},o.prototype.addSection=function(){var e=this;this.pipAddSettingsSectionDialog.show({},function(t){e.addSectionDialogCallback(t)})},o.prototype.addSectionDialogCallback=function(t,e){var i=this;void 0===e&&(e={}),this.transaction.begin("Adding section"),this.pipSettingsData.createSettings(t,e,function(){i.saveSectionCallback(t)},function(t){i.errorkeyCallback(t)})},o.prototype.saveSectionCallback=function(t){this.transaction.end(),this.settingsSections.push({name:t,hide:this.filterSections(t)}),this.selectItem(this.settingsSections.length-1)},o.prototype.errorSectionCallback=function(t){this.transaction.end("error"),this.pipToasts.showError(t,null,null,null,null)},o);function o(t,e,i,s,r,n,o,a,c,l,p){var d=this;this.$window=t,this.$location=e,this.pipToasts=i,this.pipAddSettingsSectionDialog=n,this.$state=o,this.pipSettingsData=a,this.pipMedia=c,this.pipAddSettingsKeyDialog=l,this.pipConfirmationDialog=p,this.search=null,this.state=u.Progress,this.error=null,this.transaction=s.create("settings"),this.search=this.$location.search().search,this.readSettings(),this.selectIndex=0,this.getSelectDropdown=function(){d.selectItem(d.selectIndex)}}angular.module("pipSettingsPanel",["pipAddSettingsSectionDialog","pipAddSettingsKeyDialog"]).component("pipSettingsPanel",{bindings:s,templateUrl:"settings/SettingsPanel.html",controller:n})},{}],39:[function(t,e,i){n.$inject=["$injector","$stateProvider"];var s=(r.$inject=["$window","$scope","$state","$rootScope","$mdMedia","$injector","pipNavService"],r.prototype.appHeader=function(){this.pipNavService.appbar.parts={logo:!1,icon:!1,title:"breadcrumb"},this.pipNavService.appbar.addShadow(),this.pipNavService.icon.showMenu(),this.pipNavService.breadcrumb.text="Statistics",this.pipNavService.actions.hide()},r.prototype.onRetry=function(){this.$window.history.back()},r);function r(t,e,i,s,r,n,o){this.$window=t,this.pipNavService=o;n.has("pipMedia")&&n.get("pipMedia");this.appHeader()}function n(t,e){e.state("statistics",{url:"/statistics",controller:s,auth:!1,controllerAs:"$ctrl",templateUrl:"statistics/StatisticsPage.html"})}angular.module("pipStatisticsPage",["pipNav"]).config(n)},{}],40:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var u=t("./StatisticsService"),m=function(){};m.Progress="progress",m.Empty="empty",m.Data="data";var s={},r=(n.$inject=["$window","$timeout","$state","$location","pipStatisticsData","pipTransaction","pipAuxPanel","pipDateConvert","pipMedia","pipStatistics","pipToasts"],n.prototype.prepareDecades=function(){var t=moment.utc().startOf("year").add("years",-16);this.decades=new Array,this.decades.push(new u.ToolsStatisticsDecade(moment.utc(t).toDate(),t.year().toString()+" - "+t.add("years",10).year().toString()));for(var e=0;e<=1;e++){var i=_.cloneDeep(t),s=_.cloneDeep(t.add("years",10));this.decades.push(new u.ToolsStatisticsDecade(moment.utc(i).toDate(),i.year().toString()+" - "+s.year().toString()))}},n.prototype.configDates=function(){this.prepareDecades();var t=moment.utc();this.hourlyDate=this._$state.params.start&&this._$state.params.filter===u.StatisticsFilter.Hourly?this._$state.params.start:_.cloneDeep(t.toDate()),this.dailyDate=this._$state.params.start&&this._$state.params.filter===u.StatisticsFilter.Daily?this._$state.params.start:_.cloneDeep(t.toDate()),this.monthlyDate=this._$state.params.start&&this._$state.params.filter===u.StatisticsFilter.Monthly?this._$state.params.start:_.cloneDeep(t.toDate()),t.add("years",-6),this.yearlyDate=this._$state.params.start&&this._$state.params.filter===u.StatisticsFilter.Yearly?this._$state.params.start:_.cloneDeep(t.toDate())},n.prototype.getCounters=function(){var e=this;this.transaction.begin("PROCESSING"),this._rest.readStatisticsSections(null,function(t){e.counters=t,0<e.counters.length?e.getStatistics():(e.transaction.end(),e.state=m.Empty)},function(t){e._pipToasts(t),e.transaction.end()})},n.prototype.getEndDate=function(){var t;switch(this.filter){case u.StatisticsFilter.Hourly:t=moment(this.hourlyDate).add("days",1).add(0,"hours").add("minutes",-1).toDate();break;case u.StatisticsFilter.Daily:t=moment(this.dailyDate).add("weeks",1).add("minutes",-1).toDate();break;case u.StatisticsFilter.Monthly:t=moment(this.monthlyDate).add("years",1).add("minutes",-1).toDate();break;case u.StatisticsFilter.Yearly:t=moment(this.yearlyDate).add("years",10).add("minutes",-1).toDate()}return t},n.prototype.getStartDate=function(){var e;switch(this.filter){case u.StatisticsFilter.Hourly:e=moment.utc(this.hourlyDate).startOf("day").add(0,"hours").toDate(),this.hourlyDate=e;break;case u.StatisticsFilter.Daily:e=moment.utc(this.dailyDate).startOf("isoWeek").toDate(),this.dailyDate=e;break;case u.StatisticsFilter.Monthly:e=moment.utc(this.monthlyDate).startOf("year").toDate(),this.monthlyDate=e;break;case u.StatisticsFilter.Yearly:e=moment.utc(this.yearlyDate).startOf("year").toDate(),this.yearlyDate=e,this.yearlyName=_.result(_.find(this.decades,function(t){return t.value.toString()==e.toString()}),"name")}return this._$location.search("start",e),e},n.prototype.getStatistics=function(){var r=this;this.statistics=new Array;var n=this.getStartDate(),o=this.getEndDate();_.each(this.counters,function(i,s){r.filter!==u.StatisticsFilter.Total?r._rest[u.ToolsStatisticsGetFunctions[r.filter]](i,n,o,function(t){console.log("st",t),r.transaction.end();var e=new u.counterStatistics(i,t);e.seria=r.prepareForLineCharts(t,i,n,o,r.filter),console.log("temp",e),r.statistics.push(e),s===r.counters.length-1&&r.groupStatistics()},function(t){r._pipToasts(t),r.transaction.end()}):r._rest.getTotalStats(i,function(t){r.transaction.end();var e=new u.counterStatistics(i,t);e.seria=r.prepareForPieCharts(t,i),console.log("temp",e),r.statistics.push(e),s===r.counters.length-1&&r.groupStatistics()},function(t){r._pipToasts(t),r.transaction.end()})})},n.prototype.clean=function(){this.search=null,this.searchClick()},n.prototype.prepareForPieCharts=function(t,e){var i,s=[];return _.each(t,function(t){console.log(t),i=new u.pieChartSeria(t.counter,t.values[0].value),s.push(i)}),s},n.prototype.prepareForLineCharts=function(t,e,i,s,r){var n,o,a=this,c=[];return _.each(t,function(t){o=a._pipStatistics.fillLineCharts(t.values,i,s,r),n=new u.lineChartSeria(t.counter,o),c.push(n)}),console.log("v",o),c},n.prototype.groupStatistics=function(){this.groups=this.statistics,console.log("groups",this.groups),this.filterStatistics()},n.prototype.searchClick=function(){this._$location.search("search",this.search),this.transaction.begin("PROCESSING"),this.filterStatistics()},n.prototype.filterStatistics=function(){var i=this;this.statisticsGroups=new Array,_.each(this.groups,function(t,e){console.log("statisticsGroups",t,e),(!i.search||-1<e.toLowerCase().indexOf(i.search.toLowerCase()))&&i.statisticsGroups.push(new u.statisticsGroup(e,t))}),this.state=0===this.statisticsGroups.length?m.Empty:m.Data,this.transaction.end()},n.prototype.refreshStatistics=function(t){var e=this;t&&(this.filter=t),0!=this.statisticsGroups.length&&(this.state=m.Progress,this._$location.search("filter",this.filter),this.transaction.begin("PROCESSING"),this.getStatistics(),this._onlyUpdated=!0,this._$timeout(function(){e._onlyUpdated=!1},4e3))},n.prototype.previousStep=function(){switch(this.filter){case u.StatisticsFilter.Hourly:this.hourlyDate=moment.utc(this.hourlyDate).add("days",-1).toDate();break;case u.StatisticsFilter.Daily:this.dailyDate=moment.utc(this.dailyDate).add("weeks",-1).toDate();break;case u.StatisticsFilter.Monthly:this.monthlyDate=moment.utc(this.monthlyDate).add("years",-1).toDate();break;case u.StatisticsFilter.Yearly:this.yearlyDate=moment.utc(this.yearlyDate).add("years",-10).toDate()}this.refreshStatistics()},n.prototype.nextStep=function(){switch(this.filter){case u.StatisticsFilter.Hourly:this.hourlyDate=moment.utc(this.hourlyDate).add("days",1).toDate();break;case u.StatisticsFilter.Daily:this.dailyDate=moment.utc(this.dailyDate).add("weeks",1).toDate();break;case u.StatisticsFilter.Monthly:this.monthlyDate=moment.utc(this.monthlyDate).add("years",1).toDate();break;case u.StatisticsFilter.Yearly:this.yearlyDate=moment.utc(this.yearlyDate).add("years",10).toDate()}this.refreshStatistics()},n.prototype.today=function(){var t=moment.utc();switch(this.filter){case u.StatisticsFilter.Hourly:this.hourlyDate=t.toDate();break;case u.StatisticsFilter.Daily:this.dailyDate=t.toDate();break;case u.StatisticsFilter.Monthly:this.monthlyDate=t.toDate();break;case u.StatisticsFilter.Yearly:t.year(2010),this.yearlyDate=t.toDate()}this.refreshStatistics()},n.prototype.updateDate=function(){this._onlyUpdated||this.refreshStatistics()},n.prototype.updateDecade=function(t){this.yearlyDate=t,this.refreshStatistics()},n);function n(t,e,i,s,r,n,o,a,c,l,p){var d=this;this.filters=u.StatisticsFilter.All,this.state=m.Progress,this.TOTAL=u.StatisticsFilter.Total,this._onlyUpdated=!1,this.pipMedia=c,this._rest=r,this._pipAuxPanel=o,this._pipDateConvert=a,this._$state=i,this._$location=s,this._$timeout=e,this._pipStatistics=l,this._pipToasts=p,this.transaction=n.create("statistics"),this.chartXTickFormat=function(t){return d.filter==u.StatisticsFilter.Hourly&&(t+=24<t?-24:t<-24?24:0),u.ToolsStatisticsFormatTickX[d.filter](t)},this.filter=i.params.filter||u.StatisticsFilter.Hourly,this.search=i.params.search,this.configDates(),this.getCounters()}angular.module("pipStatisticsPanel",["pipCharts"]).component("pipStatisticsPanel",{bindings:s,templateUrl:"statistics/StatisticsPanel.html",controller:r})},{"./StatisticsService":41}],41:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var S=function(){};S.Yearly="Yearly",S.Monthly="Monthly",S.Daily="Daily",S.Hourly="Hourly",S.Total="Total",S.All=["Total","Yearly","Monthly","Daily","Hourly"],i.StatisticsFilter=S;var s=(Object.defineProperty(r.prototype,"statistics",{get:function(){return this._statistics},set:function(t){this._statistics=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){return this._value},set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"key",{get:function(){return this._key},set:function(t){this._key=t},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"counter",{get:function(){return this._counter},set:function(t){this._counter=t,this._seria&&(this._seria.key=t)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"seria",{get:function(){return this._seria},set:function(t){this._seria=t},enumerable:!0,configurable:!0}),r);function r(t,e,i){this._counter=t,this._statistics=e,this._value=i||void 0}i.counterStatistics=s;var n=(Object.defineProperty(o.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"counterStats",{get:function(){return this._counterStats},set:function(t){this._counterStats=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"series",{get:function(){return this._series},set:function(t){this._series=t},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"singleChartvalue",{get:function(){return this._singleChartvalue},set:function(t){this._singleChartvalue=t},enumerable:!0,configurable:!0}),o);function o(t,i){var e=this;console.log("1",t,i),this._group=i.counter,_.each(i.seria,function(t,e){i.seria[e].key=i.statistics[e].name}),this._counterStats=i,this._series=new Array,_.each(this._counterStats.seria,function(t){e._series.push(t),e._singleChartvalue=!1!==e._singleChartvalue&&(void 0!==t.values&&1===t.values.length)})}i.statisticsGroup=n;var $=function(t,e,i){this.x=t,this.value=e,this.color=i||void 0};i.chartValue=$;function a(t,e,i){this.key=t,this.values=e,this.color=i||void 0}i.lineChartSeria=a;function c(t,e,i){this.key=t,this.value=e,this.color=i||void 0}i.pieChartSeria=c;var l=function(){};l.Yearly="getYearlyStats",l.Monthly="getMonthlyStats",l.Daily="getDailyStats",l.Hourly="getHourlyStats",l.Total="getTotalStats",i.ToolsStatisticsGetFunctions=l;var p=function(){};p.Yearly="getUTCFullYear",p.Monthly="getUTCMonth",p.Daily="getUTCDate",p.Hourly="getUTCHours",i.ToolsStatisticsFormatX=p;var d=(u.Yearly=function(t){return Number(t).toFixed(0)},u.Monthly=function(t){return["January","February","March","April","May","June","July","August","September","October","November","December"][t]},u.Daily=function(t){return Number(t).toFixed(0)},u.Hourly=function(t){return(t=Number(t))<=12?t+" am":t-12+" pm"},u);function u(){}i.ToolsStatisticsFormatTickX=d;function m(t,e){this.name=e,this.value=t}i.ToolsStatisticsDecade=m;var h=(g.prototype.getStatisticsCount=function(t,e){var i=0;return _.each(t,function(t){t.counter.split(".").pop()==e&&_.each(t.values,function(t){i+=t.value})}),i},g.prototype.getStatisticsLastActionDate=function(t,e){var i={Day:0,Hour:0,Month:0,Year:0};return _.each(t,function(t){t.counter.split(".").pop()==e&&_.each(t.values,function(t){(i.year<t.year||i.year==t.year&&i.month<t.month||i.year==t.year&&i.month==t.month&&i.day<t.day||i.year==t.year&&i.month==t.month&&i.day==t.day&&i.hour<t.hour)&&(i=t)})}),i.year?moment.utc([i.year,i.month-1,i.day,i.hour]).toDate():null},g.prototype.formatXvalues=function(t,e){if(void 0!==t&&e)return t[p[e]]()},g.prototype.fillLast24LineCharts=function(s,t,e){var i=moment.utc(t),r=moment(i).hour(),n=moment(i).date(),o=moment(i).month(),a=moment(i).year(),c=new Array;function l(){r=(d+p)%24;var e=moment.utc([a,o,n,0]).add(d+p,"hours"),t=_.find(s,function(t){return r==t.hour&&e.date()==t.day&&e.month()+1==t.month&&e.year()==t.year}),i=t?t.value:0;0===d?c.push(new $(u.formatXvalues(moment.utc([a,o,n,r]).toDate(),"Hourly"),i)):c.push(new $(d+p-24,i))}var p,d=t.getUTCHours(),u=this;for(p=0;p<25;p++)l();return c},g.prototype.fillLineCharts=function(s,t,e,r){var i,n=moment.utc(t),o=moment.utc(e);console.log("st2",s);var a=moment(n).hour(),c=moment(n).date(),l=moment(n).month(),p=moment(n).year(),d=new Array;switch(r){case S.Hourly:if(24<(i=o.diff(n,"hours")+1)&&(i=24),i<=0)break;var u=t.getUTCHours(),m=void 0,h=function(){a=(u+m)%24;var e=moment.utc([p,l,c,0]).add(u+m,"hours"),t=_.find(s,function(t){return a==t.hour&&e.date()==t.day&&e.month()+1==t.month&&e.year()==t.year}),i=t?t.value:0;0===u?d.push(new $(g.formatXvalues(moment.utc([p,l,c,a]).toDate(),r),i)):d.push(new $(u+m-24,i))},g=this;for(m=0;m<i;m++)h();break;case S.Daily:var f;for(i=o.diff(n,"days")+1,a=null,f=c;f<c+i;f++){var v=(b=_.find(s,function(t){return f==t.day&&l+1==t.month&&p==t.year}))?b.value:0;d.push(new $(this.formatXvalues(moment.utc([p,l,f]).toDate(),r),v))}break;case S.Monthly:for(c=a=null,l=0;l<12;l++)v=(b=_.find(s,function(t){return l+1==t.month&&p==t.year}))?b.value:0,d.push(new $(this.formatXvalues(moment.utc([p,l]).toDate(),r),v));break;case S.Yearly:var y;for(i=o.diff(n,"years")+1,l=c=a=null,y=p;y<p+i+1;y++){var b;v=(b=_.find(s,function(t){return y==t.year}))?b.value:0,d.push(new $(this.formatXvalues(moment.utc([y]).toDate(),r),v))}}return d},g);function g(){}var f=(v.prototype.$get=function(){return null==this._service&&(this._service=new h),this._service},v);function v(){}angular.module("pipStatisticsService",[]).provider("pipStatistics",f)},{}],42:[function(t,e,i){!function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("counters/CountersPage.html","<pip-counters-panel></pip-counters-panel>")}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("counters/CountersPanel.html",'<table class="table table-striped table-hover bm0 pip-admin-counters-header" ng-if="$ctrl.pipMedia(\'gt-sm\')"><thead><tr><th class="pip-admin-small-td">Type</th><th>Name</th><th>Count</th></tr></thead></table><div class="pip-admin-counters pip-scroll-y pip-scroll" ng-class="{\'pip-admin-read-error\':$ctrl.error}"><table class="table table-striped table-hover" ng-if="$ctrl.pipMedia(\'gt-sm\') && $ctrl.counters" pip-scroll-container="\'.pip-admin-counters\'" pip-scroll-listen-for-event="windowResized" pip-scroll-distance="0.1"><tbody><tr ng-repeat="counter in $ctrl.counters"><td class="pip-admin-small-td">{{counter.type}}</td><td>{{counter.name}}</td><td>{{counter.count}}</td></tr></tbody></table></div>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("errors/ErrorsPage.html","<pip-errors-panel></pip-errors-panel>")}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("errors/ErrorsPanel.html",'<div class="pip-errors"><div class="pip-page-errors" ng-if="$ctrl.error"><span class="pip-error-text text-overflow color-error flex">{{::$ctrl.errorText | translate}}</span> <span class="pointer layout-row layout-align-start-center flex-fixed" ng-click="$ctrl.onClickErrorDetails()"><md-icon md-svg-icon="icons:info-circle" class="rm16 color-error"></md-icon><span class="flex text-body2 color-error">{{:: \'DETAILS\' | translate }}</span></span></div><div class="pip-filter-row divider-bottom layout-row pip-search-panel rp16 lp0 pip-filter-search-row flex"><pip-search-row pip-search="$ctrl.search" class="pip-search-panel-primary" pip-on-search="$ctrl.onSearchErrors()" xxxng-disabled="$ctrl.transaction.busy()"></pip-search-row><div class="pip-search-panel-secondary layout-row layout-align-start-center"><div class="flex"></div><div class="pip-filter-text">Autorefresh</div><md-input-container class="md-block"><md-select class="flex" aria-label="Status" ng-model="$ctrl.refresh" ng-disabled="$ctrl.updating" md-on-close="$ctrl.onRefreshChange()"><md-option ng-value="minutes" ng-repeat="minutes in $ctrl.refreshTimes">{{::minutes}} mins</md-option></md-select></md-input-container></div></div><md-button class="md-fab md-accent md-fab-bottom-right" aria-label="add" ng-hide="$ctrl.loading" ng-disabled="$ctrl.updating" ng-click="$ctrl.onRefreshClick()"><md-icon md-svg-icon="icons:reload"></md-icon></md-button><md-progress-linear md-mode="indeterminate" style="position: absolute;" ng-show="$ctrl.updating"></md-progress-linear><table class="table table-striped table-hover bm0 pip-errors-header" ng-if="$ctrl._pipMedia(\'gt-xs\') && $ctrl.state == \'data\'"><thead><tr><th class="pip-big-td">Error</th><th class="pip-small-medium-td">First</th><th class="pip-small-medium-td">Last</th><th class="pip-small-td">Count</th><th class="pip-small-td p4"></th></tr></thead></table><div class="pip-errors-container pip-scroll-y pip-scroll" ng-class="{\'pip-read-error\':$ctrl.error}" ng-if="$ctrl.state == \'data\'"><table class="table table-striped table-hover bm0" ng-if="$ctrl._pipMedia(\'gt-xs\')"><tbody><tr ng-repeat-start="errorType in $ctrl.errors track by $index" ng-click="errorType.collapsed = !errorType.collapsed"><td class="pip-big-td text-overflow">{{errorType.ErrorType}}</td><td class="pip-small-medium-td text-overflow">{{ errorType.first }}</td><td class="pip-small-medium-td text-overflow">{{ errorType.last }}</td><td class="pip-small-td">{{ errorType.count }}</td><td class="pip-small-td text-center p4"><md-button class="md-icon-button m0 p0" aria-label="expand"><md-icon md-svg-icon="icons:chevron-down" ng-class="{\'error-expand\': errorType.collapsed, \'error-not-expand\': !errorType.collapsed }"></md-icon></md-button></td></tr><tr ng-repeat-end="" ng-if="errorType.collapsed"><td class="p0 error-messages" colspan="5"><table class="table table-striped table-hover bm0"><tfoot ng-if="errorType.items.length > $ctrl.showMessagesLimit"><tr><td colspan="4"><a class="lm16" ng-click="$ctrl.onShowMore(errorType)" ng-class="{\'rm16\': errorType.show > $ctrl.showMessagesLimit}" ng-show="errorType.show < errorType.items.length">Show More ...</a> <a ng-click="$ctrl.onShowLess(errorType)" ng-show="errorType.show > $ctrl.showMessagesLimit">Show Less ...</a></td></tr></tfoot><tbody><tr ng-repeat="item in errorType.items | limitTo:errorType.show" class="active .error-message" ng-click="$ctrl.onErrorsDetails(item)"><td class="pip-big-td text-overflow">{{ item.message }}</td><td class="pip-small-medium-td text-overflow">{{ item.time}}</td><td class="pip-small-medium-td text-overflow">{{ item.correlation_id }}</td><td class="pip-small-td"></td><td class="pip-small-td text-center p4"><md-button class="md-icon-button m0 p0" aria-label="show-details"><md-icon class="pointer" md-svg-icon="icons:search"></md-icon></md-button></td></tr></tbody></table></td></tr></tbody></table><md-list class="pip-menu pip-ref-list" ng-if="$ctrl._pipMedia(\'xs\')" style="overflow-x: hidden"><md-list-item class="pip-ref-list-item" ng-class="{\'divider-bottom\': !$last}" md-ink-ripple="" ng-repeat-start="errorType in $ctrl.errors"><div class="pip-content flex" ng-click="errorType.collapsed = !errorType.collapsed"><div class="pip-title text-overflow">{{errorType.items[0].Error.Type}}</div><p class="pip-subtitle text-overflow tm4">{{errorType.first }} • {{errorType.last}} • {{errorType.count}}</p></div><div class="pip-pic flex-fixed" ng-click="errorType.collapsed = !errorType.collapsed"><md-icon md-svg-icon="icons:chevron-down" ng-class="{\'error-expand\': errorType.collapsed, \'error-not-expand\': !errorType.collapsed }"></md-icon></div></md-list-item><div ng-repeat-end="" ng-if="errorType.collapsed"><md-list-item class="pip-ref-list-item error-messages" ng-class="{\'divider-bottom\': !$last}" md-ink-ripple="" ng-repeat="item in errorType.items | limitTo:errorType.show"><div class="pip-content flex" ng-click="$ctrl.onErrorsDetails(item)"><div class="pip-title text-overflow">{{ item.message }}</div><p class="pip-subtitle text-overflow tm4">{{ item.correlation_id }} <span ng-show="item.correlation_id && item.time">•</span> {{ item.time }}</p></div><div class="pip-pic flex-fixed" ng-click="$ctrl.onErrorsDetails(item)"><md-icon md-svg-icon="icons:search"></md-icon></div></md-list-item><div class="h48 layout-align-start-center layout-row divider-bottom" ng-if="errorType.items.length > $ctrl.showMessagesLimit"><a class="lm16" ng-click="$ctrl.onShowMore(errorType)" ng-class="{\'rm16\': errorType.show > $ctrl.showMessagesLimit}" ng-show="errorType.show < errorType.items.length">Show More ...</a> <a ng-click="$ctrl.onShowLess(errorType)" ng-show="errorType.show > $ctrl.showMessagesLimit">Show Less ...</a></div></div></md-list></div><div class="layout-column layout-align-center-center flex pip-admin-empty" ng-if="$ctrl.state == \'empty\' || $ctrl.state == \'loading\'"><div class="pip-empty" ng-if="$ctrl.state == \'empty\'"><img src="images/EmptyState.svg" class="pip-pic"><div class="pip-text">There are no errors…<br>Try again later <span ng-show="$ctrl.searchQuery">or change filter options</span></div></div><div class="pip-empty" ng-if="$ctrl.state == \'loading\'"><img src="images/LoadingState.svg" class="pip-pic"><div class="pip-text">Loading errors<md-progress-linear md-mode="indeterminate" class="tm24"></md-progress-linear></div></div></div></div>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("events/EventsPage.html","<pip-events-panel></pip-events-panel>")}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("events/EventsPanel.html",'<div ng-show="$ctrl.error" class="pip-page-errors"><span class="pip-error-text color-error text-overflow flex">{{$ctrl.error}}</span><md-icon md-svg-icon="icons:warn-circle" class="color-error"></md-icon></div><div class="pip-filter-row divider-bottom layout-row pip-search-panel rp0 lp0 pip-filter-search-row flex"><pip-search-row pip-search="$ctrl.search" pip-on-search="$ctrl.refreshEvents()" xxxng-disabled="$ctrl.transaction.busy()"></pip-search-row></div><md-button class="md-fab md-accent md-fab-bottom-right" ng-click="$ctrl.refreshEvents()" aria-label="add"><md-icon md-svg-icon="icons:reload"></md-icon></md-button><md-progress-linear md-mode="indeterminate" style="position: absolute;" ng-show="$ctrl.updating && $ctrl.state == \'data\'"></md-progress-linear><table class="table table-striped table-hover bm0 pip-admin-events-header" ng-if="$ctrl.pipMedia(\'gt-sm\') && $ctrl.state == \'data\'"><thead><tr><th class="pip-admin-small-td">Severity</th><th ng-class="$ctrl.pipMedia(\'gt-md\') ? \'pip-admin-medium-td\': \'pip-admin-small-medium-td\'">ID</th><th class="pip-admin-small-medium-td">Time</th><th class="pip-admin-small-medium-td">Type</th><th class="pip-admin-medium-td">Source</th><th>Message</th></tr></thead></table><div class="pip-admin-events pip-scroll-y pip-scroll" ng-if="$ctrl.state == \'data\'"><table class="table table-striped table-hover" ng-if="$ctrl.pipMedia(\'gt-sm\')" pip-infinite-scroll="$ctrl.readEvents()" pip-scroll-container="\'.pip-admin-events\'" pip-scroll-listen-for-event="windowResized" pip-scroll-distance="0.1"><tbody><tr class="w-streach" ng-repeat="event in $ctrl.events"><td class="pip-admin-small-td">{{event.severity}}</td><td class="pip-admin-break" ng-class="$ctrl.pipMedia(\'gt-md\') ? \'pip-admin-medium-td\': \'pip-admin-small-medium-td\'">{{event.id}}</td><td class="pip-admin-small-medium-td">{{event.time }}</td><td class="pip-admin-small-medium-td">{{event.type}}</td><td class="pip-admin-medium-td">{{event.source}}</td><td class="">{{event.message}}</td></tr></tbody></table><md-list class="pip-menu pip-ref-list" ng-if="($ctrl.pipMedia(\'xs\') || $ctrl.pipMedia(\'sm\')) && $ctrl.state == \'data\'" style="overflow-x: hidden"><md-list-item class="pip-ref-list-item divider-bottom" md-ink-ripple="" ng-repeat="event in $ctrl.events"><div class="pip-pic layout-row layout-align-center-center"><md-icon md-svg-icon="icons:warn-star" ng-if="event.severity == 0" class="color-error"><md-tooltip md-visible="showTooltip" md-direction="right">Critical</md-tooltip></md-icon><md-icon md-svg-icon="icons:warn-triangle" ng-if="event.severity == 1" class="color-warm"><md-tooltip md-visible="showTooltip" md-direction="right">Important</md-tooltip></md-icon><md-icon md-svg-icon="icons:warn-circle" ng-if="event.severity == 2" class="fg-cyan"><md-tooltip md-visible="showTooltip" md-direction="right">Informational</md-tooltip></md-icon></div><div class="pip-content"><div class="text-body2 text-overflow">{{event.correlation_id}} <span>•</span> {{event.time }} <span ng-if="event.Type">•</span> {{event.type}}</div><div class="text-body2">{{event.component}}</div><p class="pip-subtitle">{{event.message}}</p></div></md-list-item></md-list></div><div class="layout-column layout-align-center-center flex pip-admin-empty pip-scroll" ng-if="$ctrl.state == \'progress\' || $ctrl.state == \'empty\'"><div class="pip-empty" ng-if="$ctrl.state == \'empty\'"><img src="images/EmptyState.svg" class="pip-pic"><div class="pip-text">There are no events right now…<br>Try again later or change filter options</div></div><div class="pip-empty" ng-if="$ctrl.state == \'progress\'"><img src="images/LoadingState.svg" class="pip-pic"><div class="pip-text">Loading events<md-progress-linear md-mode="indeterminate" class="tm24"></md-progress-linear></div></div></div>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("logging/LoggingPage.html","<pip-logging-panel></pip-logging-panel>")}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("logging/LoggingPanel.html",'<div class="pip-filter-row divider-bottom layout-row pip-search-panel rp0 lp0 pip-filter-search-row flex"><pip-search-row pip-search="$ctrl.localSearch" pip-on-search="$ctrl.onSearch()" xxxng-disabled="$ctrl.transaction.busy()"></pip-search-row><div class="flex layout-row layout-align-start-center"><div class="flex"></div><div class="pip-filter-text">Autorefresh</div><md-input-container class="md-block"><md-select class="flex" aria-label="Status" ng-model="$ctrl.refresh" md-on-close="$ctrl.onRefreshChange()"><md-option ng-value="minutes" ng-repeat="minutes in $ctrl.refreshTimes">{{::minutes}} sec</md-option></md-select></md-input-container></div></div><md-button class="md-fab md-accent md-fab-bottom-right" aria-label="add" ng-click="$ctrl.playStopAutoUpdate()"><md-icon md-svg-icon="icons:play" ng-if="!$ctrl.autoUpdate"></md-icon><md-icon md-svg-icon="icons:pause" ng-if="$ctrl.autoUpdate"></md-icon></md-button><md-progress-linear md-mode="indeterminate" style="position: absolute;" ng-show="$ctrl.transaction.busy() && $ctrl.state() != \'progress\'"></md-progress-linear><table class="table table-striped table-hover bm0 pip-admin-loggings-header" ng-if="$ctrl.pipMedia(\'gt-sm\') && $ctrl.state() != \'empty\'"><thead><tr><th class="pip-admin-small-td">level</th><th class="pip-admin-medium-td">Time</th><th class="pip-admin-medium-td">Correlation ID</th><th>Message</th><th class="pip-admin-small-td"></th></tr></thead></table><div class="pip-admin-loggings pip-scroll-y pip-scroll" ng-class="{\'pip-admin-read-error\':$ctrl.error}" ng-if="$ctrl.state() != \'empty\'"><table class="table table-striped table-hover" ng-if="$ctrl.pipMedia(\'gt-sm\') && $ctrl.loggings && $ctrl.state() != \'empty\'" pip-infinite-scroll="$ctrl.readLogging()" pip-scroll-container="\'.pip-admin-loggings\'" pip-scroll-listen-for-event="windowResized" pip-scroll-distance="0.1"><tbody><tr ng-repeat="trace in $ctrl.loggings()"><td class="pip-admin-small-td"><md-icon md-svg-icon="icons:menu" ng-if="trace.level == 6" class="fg-cyan"><md-tooltip md-visible="showTooltip" md-direction="right">Trace</md-tooltip></md-icon><md-icon md-svg-icon="icons:bug" ng-if="trace.level == 5" class="fg-cyan"><md-tooltip md-visible="showTooltip" md-direction="right">Debug</md-tooltip></md-icon><md-icon md-svg-icon="icons:info-circle-outline" ng-if="trace.level == 4" class="fg-cyan"><md-tooltip md-visible="showTooltip" md-direction="right">Info</md-tooltip></md-icon><md-icon md-svg-icon="icons:info-circle" ng-if="trace.level == 3" class="color-warm"><md-tooltip md-visible="showTooltip" md-direction="right">Warning</md-tooltip></md-icon><md-icon md-svg-icon="icons:warn-triangle" ng-if="trace.level == 2" class="color-warn"><md-tooltip md-visible="showTooltip" md-direction="right">Error</md-tooltip></md-icon><md-icon md-svg-icon="icons:warn-star" ng-if="trace.level == 1" class="color-error"><md-tooltip md-visible="showTooltip" md-direction="right">Fatal</md-tooltip></md-icon></td><td class="pip-admin-medium-td">{{trace.time}}</td><td class="pip-admin-medium-td">{{trace.correlation_id}}</td><td class=""><div class="pip-admin-trace-message">{{trace.message}}</div></td><td class="pip-admin-small-td tp4 bp4"><md-button class="md-icon-button" ng-click="$ctrl.onErrorDetails(trace)" aria-label="error" ng-if="trace.error"><md-icon md-svg-icon="icons:search"></md-icon></md-button></td></tr></tbody></table><md-list class="pip-menu pip-ref-list tp0" ng-if="($ctrl.pipMedia(\'xs\') || $ctrl.pipMedia(\'sm\')) && $ctrl.state() == \'data\'"><md-list-item class="pip-ref-list-item divider-bottom" md-ink-ripple="" ng-repeat="trace in $ctrl.loggings"><div class="pip-pic flex-fixed lm16 layout-row layout-align-center-center"><md-icon md-svg-icon="icons:menu" ng-if="trace.level == 6" class="fg-cyan"><md-tooltip md-visible="showTooltip" md-direction="right">Trace</md-tooltip></md-icon><md-icon md-svg-icon="icons:bug" ng-if="trace.level == 5" class="fg-cyan"><md-tooltip md-visible="showTooltip" md-direction="right">Debug</md-tooltip></md-icon><md-icon md-svg-icon="icons:info-circle-outline" ng-if="trace.level == 4" class="fg-cyan"><md-tooltip md-visible="showTooltip" md-direction="right">Info</md-tooltip></md-icon><md-icon md-svg-icon="icons:info-circle" ng-if="trace.level == 3" class="color-warm"><md-tooltip md-visible="showTooltip" md-direction="right">Warning</md-tooltip></md-icon><md-icon md-svg-icon="icons:warn-triangle" ng-if="trace.level == 2" class="color-warn"><md-tooltip md-visible="showTooltip" md-direction="right">Error</md-tooltip></md-icon><md-icon md-svg-icon="icons:warn-star" ng-if="trace.level == 1" class="color-error"><md-tooltip md-visible="showTooltip" md-direction="right">Fatal</md-tooltip></md-icon></div><div class="pip-content flex"><div class="text-body2 text-overflow">{{trace.time}} <span ng-if="trace.CorrelationId">•</span> {{trace.correlation_id}}</div><p class="pip-subtitle pip-trace-message">{{trace.message}}</p></div><div class="pip-pic rm0"><md-button class="md-icon-button flex-fixed" ng-if="trace.Error" ng-click="$ctrl.onErrorDetails(trace)" aria-label="error"><md-icon md-svg-icon="icons:search"></md-icon></md-button></div></md-list-item></md-list></div><div class="layout-column layout-align-center-center flex pip-admin-empty pip-scroll" ng-if="$ctrl.state() == \'empty\' || $ctrl.state() == \'progress\'"><div class="pip-empty" ng-if="$ctrl.state() == \'empty\'"><img src="images/EmptyState.svg" class="pip-pic"><div class="pip-text">There is no data right now…<br>Try again later or change filter options</div></div><div class="pip-empty" ng-show="$ctrl.state() == \'progress\'"><img src="images/LoadingState.svg" class="pip-pic"><div class="pip-text">Loading traces<md-progress-linear md-mode="indeterminate" class="tm24"></md-progress-linear></div></div></div>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("settings/AddSettingsKeyDialog.html",'<md-dialog class="pip-dialog layout-column bb-settings-key-dialog" width="400" md-theme="{{$ctrl.theme}}"><div class="pip-body pip-scroll p16 bp0"><h3 class="tm0">{{$ctrl.title}}</h3><md-input-container class="md-block flex bm0"><label>Key</label> <input ng-model="$ctrl.key.name"></md-input-container><md-input-container class="md-block flex bm0"><label>Value</label> <textarea ng-model="$ctrl.key.data"> </textarea></md-input-container></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="$ctrl.onCancel()">Cancel</md-button><md-button class="md-accent" ng-click="$ctrl.onOk()" ng-disabled="!$ctrl.key.name || !$ctrl.key.data">Ok</md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("settings/AddSettingsSectionDialog.html",'<md-dialog class="pip-dialog layout-column pip-scroll" width="400" md-theme="{{$ctrl.theme}}"><div class="pip-body"><h3 class="tm0">New section</h3><md-input-container class="md-block flex bm0"><label>Section name</label> <input ng-model="$ctrl.sectionName"></md-input-container></div><div class="pip-footer"><div><md-button class="md-accent" ng-click="$ctrl.onCancel()">Cancel</md-button><md-button class="md-accent" ng-click="$ctrl.onOk()" ng-disabled="!$ctrl.sectionName">Ok</md-button></div></div></md-dialog>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("settings/SettingsPage.html","<pip-settings-panel></pip-settings-panel>")}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("settings/SettingsPanel.html",'<div class="pip-main-menu pip-settings" ng-class="{\'pip-single-content\': $ctrl.details}" ng-if="$ctrl.pipMedia(\'gt-sm\')"><div class="pip-menu"><div class="pip-filter-row layout-row pip-search-panel rp0 lp0 pip-filter-search-row flex"><pip-search-row pip-search="$ctrl.search" pip-on-search="$ctrl.onSearch()" xxxng-disabled="$ctrl.transaction.busy()"></pip-search-row></div><div ng-show="$ctrl.error" class="pip-page-errors"><span class="pip-error-text color-error flex">{{$ctrl.error}}</span><md-icon md-svg-icon="icons:warn-circle" class="color-error"></md-icon></div><div class="pip-list-container pip-scroll" style="height: calc(100% - 48px);" ng-class="{\'pip-menu-empty\': $ctrl.state == \'empty\'}"><md-list class="pip-simple-list tp0" pip-selected="$ctrl.selectIndex" pip-select="$ctrl.selectItem($event.index)"><md-list-item class="pip-simple-list-item pip-selectable {{ $ctrl.selectIndex == $index ? \'selected\' : \'\' }}" md-ink-ripple="" ng-repeat="section in $ctrl.settingsSections" ng-show="!section.hide"><p class="pip-title text-body2">{{ section.name }}</p></md-list-item></md-list></div></div><div class="pip-content-container"><div><pip-document><div class="pip-header p0" ng-if="$ctrl.pipMedia(\'gt-md\') && $ctrl.state == \'data\'"><table class="table table-striped table-hover bm0"><thead><tr><th class="lp16">Key</th><th class="pip-settings-value">Value</th><th style="width: 48px"></th></tr></thead></table></div><div class="pip-body p0 layout-column layout-align-center-center" ng-if="$ctrl.pipMedia(\'gt-md\') && $ctrl.state != \'data\'"><div class="layout-column layout-align-center-center flex pip-empty pip-scroll w-stretch" ng-if="$ctrl.state == \'empty\'"><div class="pip-empty"><img src="images/EmptyState.svg" class="pip-pic"><div class="pip-text">There is no data right now…<br>Try again later or change filter options</div></div></div><div class="layout-column layout-align-center-center flex pip-empty pip-scroll w-stretch" ng-if="$ctrl.state == \'progress\'"><div class="pip-empty"><img src="images/LoadingState.svg" class="pip-pic"><div class="pip-text">Loading settings<md-progress-linear md-mode="indeterminate" class="tm24"></md-progress-linear></div></div></div></div><div class="pip-body p0" ng-if="$ctrl.state == \'data\'"><table class="table table-striped table-hover" style="margin-bottom: 72px" ng-if="$ctrl.pipMedia(\'gt-md\')"><tbody><tr ng-repeat="(key, value) in $ctrl.settings[$ctrl.selectIndex]" ng-if="key != \'toJSON\'"><td class="pip-settings-key lp16" ng-bind-html="key"></td><td class="pip-settings-value"><div class="pip-settings-key" ng-if="!key.includes(\'Utc\')">{{ value }}</div><div class="pip-settings-key" ng-if="key.includes(\'Utc\')">{{ value }}</div></td><td class="tp4 bp4" style="width: 48px"><md-menu><md-button class="md-icon-button" ng-click="$mdOpenMenu()" aria-label="vdots"><md-icon md-menu-origin="" md-svg-icon="icons:vdots"></md-icon></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="$ctrl.updateKey(key, value)" aria-label="update">Update</md-button></md-menu-item><md-menu-item ng-click="$ctrl.openDeleteKeyDialog(key, value)"><md-button aria-label="delete">Delete</md-button></md-menu-item></md-menu-content></md-menu></td></tr></tbody></table><div ng-if="$ctrl.pipMedia(\'md\') && $ctrl.state == \'data\'"><div class="pip-menu" style="width: 100% !important;"><div class="pip-list-container pip-scroll"><md-list class="pip-ref-list tp0"><md-list-item class="pip-ref-list-item divider-bottom" md-ink-ripple="" ng-if="key != \'toJSON\'" ng-repeat="(key, value) in $ctrl.settings[$ctrl.selectIndex]"><div class="pip-content flex"><div class="text-body2 text-overflow" ng-bind-html="key"></div><p class="pip-subtitle">{{value}}</p></div><div class="pip-pic rm0"><md-menu><md-button class="md-icon-button" ng-click="$mdOpenMenu()" aria-label="vdots"><md-icon md-menu-origin="" md-svg-icon="icons:vdots"></md-icon></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="$ctrl.updateKey(key, value)" aria-label="update">Update</md-button></md-menu-item><md-menu-item ng-click="$ctrl.openDeleteKeyDialog(key, value)"><md-button aria-label="delete">Delete</md-button></md-menu-item></md-menu-content></md-menu></div></md-list-item></md-list><div style="margin-bottom: 72px"></div></div></div></div></div><md-fab-speed-dial md-direction="up" style="z-index: 55" ng-if="$ctrl.state != \'progress\'" class="md-fab-bottom-right md-fling" pip-fab-tooltip-visibility="opened" pip-fab-show-tooltip="showTooltip" md-open="opened"><md-fab-trigger><md-button aria-label="menu" class="md-fab md-accent"><md-icon md-svg-icon="icons:plus"></md-icon></md-button></md-fab-trigger><md-fab-actions><md-button aria-label="New section" class="md-fab md-accent md-mini pip-fab-mini md-raised" ng-disabled="transaction.busy()" ng-click="$ctrl.addSection()"><md-tooltip md-visible="showTooltip" md-direction="left">Section</md-tooltip><md-icon md-svg-icon="icons:pie-chart"></md-icon></md-button><md-button aria-label="New key" class="md-fab md-accent md-mini md-raised pip-fab-mini" ng-disabled="transaction.busy()" ng-click="$ctrl.addKey()"><md-tooltip md-visible="showTooltip" md-direction="left">Key</md-tooltip><md-icon md-svg-icon="icons:submenu"></md-icon></md-button></md-fab-actions></md-fab-speed-dial></pip-document></div></div></div><md-fab-speed-dial md-direction="up" style="z-index: 55" ng-if="$ctrl.state != \'progress\' && !$ctrl.pipMedia(\'gt-sm\')" class="md-fab-bottom-right md-fling" pip-fab-tooltip-visibility="opened" pip-fab-show-tooltip="showTooltip" md-open="opened"><md-fab-trigger><md-button aria-label="menu" class="md-fab md-accent"><md-icon md-svg-icon="icons:plus"></md-icon></md-button></md-fab-trigger><md-fab-actions><md-button aria-label="New section" class="md-fab md-accent md-mini pip-fab-mini md-raised" ng-disabled="transaction.busy()" ng-click="$ctrl.addSection()"><md-tooltip md-visible="showTooltip" md-direction="left">Section</md-tooltip><md-icon md-svg-icon="icons:pie-chart"></md-icon></md-button><md-button aria-label="New key" class="md-fab md-accent md-mini md-raised pip-fab-mini" ng-disabled="transaction.busy()" ng-click="$ctrl.addKey()"><md-tooltip md-visible="showTooltip" md-direction="left">Key</md-tooltip><md-icon md-svg-icon="icons:submenu"></md-icon></md-button></md-fab-actions></md-fab-speed-dial><pip-dropdown pip-actions="$ctrl.settingsSections" pip-active-index="$ctrl.selectIndex" pip-change="$ctrl.getSelectDropdown()" ng-if="!$ctrl.pipMedia(\'gt-sm\') && $ctrl.state != \'progress\'"></pip-dropdown><div class="pip-main-menu pip-settings" ng-if="!$ctrl.pipMedia(\'gt-sm\') && $ctrl.state != \'progress\'"><div class="pip-menu" style="width: 100% !important;"><div class="pip-list-container pip-scroll"><md-list class="pip-ref-list tp0"><md-list-item class="pip-ref-list-item divider-bottom" md-ink-ripple="" ng-repeat="(key, value) in $ctrl.settings[$ctrl.selectIndex]" ng-if="key != \'toJSON\'"><div class="pip-content flex"><div class="text-body2 text-overflow" ng-bind-html="key"></div><p class="pip-subtitle">{{value}}</p></div><div class="pip-pic rm0"><md-menu><md-button class="md-icon-button" ng-click="$mdOpenMenu()"><md-icon md-menu-origin="" md-svg-icon="icons:vdots"></md-icon></md-button><md-menu-content width="3"><md-menu-item><md-button ng-click="$ctrl.updateKey(key, value)">Update</md-button></md-menu-item><md-menu-item ng-click="$ctrl.openDeleteKeyDialog(key, value)"><md-button>Delete</md-button></md-menu-item></md-menu-content></md-menu></div></md-list-item></md-list><div style="margin-bottom: 72px"></div></div></div></div><div class="layout-column layout-align-center-center flex pip-empty" ng-if="$ctrl.state == \'progress\'"><div class="pip-empty"><img src="images/LoadingState.svg" class="pip-pic"><div class="pip-text">Loading settings<md-progress-linear md-mode="indeterminate" class="tm24"></md-progress-linear></div></div></div><md-progress-linear md-mode="indeterminate" style="position: absolute; z-index: 100" ng-show="$ctrl.transaction.busy() && $ctrl.state != \'progress\'"></md-progress-linear>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("statistics/StatisticsPage.html","<pip-statistics-panel></pip-statistics-panel>")}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("statistics/StatisticsPanel.html",'<div class="pip-filter-row divider-bottom layout-row pip-search-panel rp0 lp0 pip-filter-search-row flex"><pip-search-row pip-search="$ctrl.search" pip-on-search="$ctrl.searchClick()" xxxng-disabled="$ctrl.transaction.busy()"></pip-search-row><div class="pip-search-panel-primary flex layout-row layout-align-start-center"><md-input-container class="md-block"><md-select class="flex" aria-label="Status" ng-model="$ctrl.filter"><md-option ng-value="opt" ng-click="$ctrl.refreshStatistics(opt)" ng-repeat="opt in $ctrl.filters">{{::opt}}</md-option></md-select></md-input-container><div class="pip-filter-text" ng-if="$ctrl.filter !== $ctrl.TOTAL">for</div><div ng-if="$ctrl.filter === \'Hourly\'"><md-datepicker ng-model="$ctrl.hourlyDate" ng-change="$ctrl.refreshStatistics()"></md-datepicker></div><div ng-if="$ctrl.filter === \'Daily\'"><pip-date-range pip-date-range-type="weekly" ng-model="$ctrl.dailyDate" pip-changed="$ctrl.updateDate()"></pip-date-range></div><div ng-if="$ctrl.filter === \'Monthly\'"><pip-date-range pip-date-range-type="yearly" ng-model="$ctrl.monthlyDate" pip-changed="$ctrl.updateDate()"></pip-date-range></div><div ng-if="$ctrl.filter === \'Yearly\'"><md-input-container class="md-block"><md-select ng-model="$ctrl.yearlyName" class="flex"><md-option ng-repeat="decade in $ctrl.decades" ng-value="decade.name" ng-click="$ctrl.updateDecade(decade.value)">{{ decade.name }}</md-option></md-select></md-input-container></div><md-button ng-if="$ctrl.filter !== $ctrl.TOTAL && $ctrl.pipMedia(\'gt-sm\')" class="rm0"><md-icon md-svg-icon="icons:arrow-left" ng-click="$ctrl.previousStep()"></md-icon></md-button><md-button ng-if="$ctrl.filter !== $ctrl.TOTAL && $ctrl.pipMedia(\'gt-sm\')" class="lm0 rm0"><md-icon md-svg-icon="icons:date" ng-click="$ctrl.today()"></md-icon></md-button><md-button ng-if="$ctrl.filter !== $ctrl.TOTAL && $ctrl.pipMedia(\'gt-sm\')" class="lm0"><md-icon md-svg-icon="icons:arrow-right" ng-click="$ctrl.nextStep()"></md-icon></md-button></div></div><md-progress-linear md-mode="indeterminate" style="position: absolute;" ng-show="$ctrl.transaction.busy() && $ctrl.state != \'progress\'"></md-progress-linear><pip-simple ng-if="$ctrl.state === \'data\'"><div class="p16"><div ng-repeat="statistics in $ctrl.statisticsGroups" ng-if="$ctrl.filter !== $ctrl.TOTAL" style="margin-bottom: 24px;"><h4>{{ statistics.group }}</h4><pip-line-chart pip-series="statistics.series" pip-inter-legend="true" ng-if="!statistics.singleChartValue" pip-x-tick-format="$ctrl.chartXTickFormat"></pip-line-chart><pip-bar-chart pip-series="statistics.series" pip-inter-legend="true" ng-if="statistics.singleChartValue" pip-x-tick-format="$ctrl.chartXTickFormat()"></pip-bar-chart></div><div ng-repeat="statistics in $ctrl.statisticsGroups" ng-if="$ctrl.filter === $ctrl.TOTAL" ng-class="{\'w-stretch\': !$ctrl.pipMedia(\'gt-sm\')}" style="display: inline-block; width: 295px; height:330px; margin-bottom: 24px; margin-right: 16px;"><h4>{{ statistics.group }}</h4><pip-pie-chart pip-series="statistics.series" pip-centered="true" pip-donut="true" pip-size="250"></pip-pie-chart></div></div></pip-simple><div class="layout-column layout-align-center-center flex pip-admin-empty" ng-if="$ctrl.state == \'empty\' || $ctrl.state == \'progress\'"><div class="pip-empty" ng-if="$ctrl.state == \'empty\'"><img src="images/EmptyState.svg" class="pip-pic"><div class="pip-text">There is no data right now…<br>Try again later or change filter options</div></div><div class="pip-empty" ng-if="$ctrl.state == \'progress\'"><img src="images/LoadingState.svg" class="pip-pic"><div class="pip-text">Loading statistics<md-progress-linear md-mode="indeterminate" class="tm24"></md-progress-linear></div></div></div>')}])}(),function(e){try{e=angular.module("pipSystem.Templates")}catch(t){e=angular.module("pipSystem.Templates",[])}e.run(["$templateCache",function(t){t.put("common/search/SearchRow.html",'<div class="pip-search layout-row layout-align-start-center flex"><md-button class="md-icon-button pip-search-button flex-fixed" ng-click="searchRow.onSearch()" ng-disabled="searchRow.isDisable()" aria-label="search"><md-icon md-svg-icon="icons:search"></md-icon></md-button><md-input-container md-no-float="" class="md-block tm8 bm8" ng-disabled="searchRow.isDisable()"><input ng-model="searchRow.localSearch" placeholder="{{::searchRow.placeholder | translate}}" ng-keypress="searchRow.onKeyPress($event)" ng-change="searchRow.onSearch()"></md-input-container><md-button class="md-icon-button flex-fixed pip-search-clear-button" ng-if="searchRow.localSearch != \'\' && searchRow.localSearch" ng-click="searchRow.onClear()" n="" ng-disabled="searchRow.isDisable()" aria-label="search"><md-icon md-svg-icon="icons:delete"></md-icon></md-button></div>')}])}()},{}]},{},[42,1,2,3,4,5,6,7,8,9,10,11,12,13,15,14,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41])(42)});
//# sourceMappingURL=pip-admin-system.min.js.map
